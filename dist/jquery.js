!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var i=function(){function e(){}return e.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},i=e.length-1;i>=0;i--){var r=e[i];for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])}return n},e.lcfirst=function(e){return e.charAt(0).toLowerCase()+e.substr(1)},e.appendInItsOwnLine=function(e,t){return(e+"\n\n[[D]]"+t).replace(/(\n{2,})\[\[D\]\]/,"\n\n").replace(/^(\n*)/,"")},e.insertTextAtCursor=function(e,t){var n,i=e.scrollTop,r=0,o=!1;e.selectionStart||0===e.selectionStart?o="ff":document.selection&&(o="ie"),"ie"===o?(e.focus(),(n=document.selection.createRange()).moveStart("character",-e.value.length),r=n.text.length):"ff"===o&&(r=e.selectionStart||0);var a=e.value.substring(0,r),s=e.value.substring(r,e.value.length);e.value=a+t+s,r+=t.length,"ie"===o?(e.focus(),(n=document.selection.createRange()).moveStart("character",-e.value.length),n.moveStart("character",r),n.moveEnd("character",0),n.select()):"ff"===o&&(e.selectionStart=r,e.selectionEnd=r,e.focus()),e.scrollTop=i},e}();t.a=i},function(e,t,n){"use strict";n.r(t);var i=n(0),r={uploadUrl:"upload_attachment.php",uploadMethod:"POST",uploadFieldName:"file",defaultExtension:"png",jsonFieldName:"filename",allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],progressText:"![Uploading file...]()",urlText:"![file]({filename})",errorText:"Error uploading file",extraParams:{},extraHeaders:{},beforeFileUpload:function(){return!0},onFileReceived:function(){return!0},onFileUploadResponse:function(){return!0},onFileUploadError:function(){return!0},onFileUploaded:function(){}},o=function(){function e(e,t){this.settings=i.a.merge(t,r),this.editor=e,this.filenameTag="{filename}",this.lastValue=null}return e.prototype.uploadFile=function(e){var t=this,n=new FormData,i=new XMLHttpRequest,r=this.settings,o=r.defaultExtension;if("function"==typeof r.setupFormData&&r.setupFormData(n,e),e.name){var a=e.name.match(/\.(.+)$/);a&&(o=a[1])}var s="image-"+Date.now()+"."+o;if("function"==typeof r.remoteFilename&&(s=r.remoteFilename(e)),n.append(r.uploadFieldName,e,s),"object"==typeof r.extraParams)for(var l in r.extraParams)r.extraParams.hasOwnProperty(l)&&n.append(l,r.extraParams[l]);if(i.open("POST",r.uploadUrl),"object"==typeof r.extraHeaders)for(var u in r.extraHeaders)r.extraHeaders.hasOwnProperty(u)&&i.setRequestHeader(u,r.extraHeaders[u]);(i.onload=function(){200===i.status||201===i.status?t.onFileUploadResponse(i):t.onFileUploadError(i)},r.beforeFileUpload)&&(!1!==r.beforeFileUpload(i)&&i.send(n));return i},e.prototype.isFileAllowed=function(e){return"string"!==e.kind&&(0===this.settings.allowedTypes.indexOf("*")||this.settings.allowedTypes.indexOf(e.type)>=0)},e.prototype.onFileUploadResponse=function(e){if(this.settings.onFileUploadResponse&&this.lastValue&&!1!==this.settings.onFileUploadResponse.call(this,e)){var t=JSON.parse(e.responseText),n=t[this.settings.jsonFieldName];if(t&&n){var i;i="function"==typeof this.settings.urlText?this.settings.urlText.call(this,n,t):this.settings.urlText.replace(this.filenameTag,n);var r=this.editor.getValue().replace(this.lastValue,i);this.editor.setValue(r),this.settings.onFileUploaded&&this.settings.onFileUploaded.call(this,n)}}},e.prototype.onFileUploadError=function(e){if(this.settings.onFileUploadError&&this.lastValue&&!1!==this.settings.onFileUploadError.call(this,e)){var t=this.editor.getValue().replace(this.lastValue,this.settings.errorText);this.editor.setValue(t)}},e.prototype.onFileInserted=function(e){this.settings.onFileReceived&&!1!==this.settings.onFileReceived.call(this,e)&&(this.lastValue=this.settings.progressText,this.editor.insertValue(this.lastValue))},e.prototype.onPaste=function(e){var t,n=e.clipboardData,i=!1;if("object"==typeof n){t=n.items||n.files||[];for(var r=0;r<t.length;r++){var o=t[r];this.isFileAllowed(o)&&(i=!0,this.onFileInserted(o.getAsFile()),this.uploadFile(o.getAsFile()))}}return i&&e.preventDefault(),i},e.prototype.onDrop=function(e){for(var t=!1,n=0;n<e.dataTransfer.files.length;n++){var i=e.dataTransfer.files[n];this.isFileAllowed(i)&&(t=!0,this.onFileInserted(i),this.uploadFile(i))}return t},e}();t.default=o},,,function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0),o=function(){function e(e,t){this.instance=e,this.options=t,this.bind()}return e.attach=function(t){t.fn.inlineAttachment=function(n){return this.each(function(){new e(t(this),n)}),this}},e.prototype.getInlineAttachment=function(){return this.inlineAttachment},e.prototype.getValue=function(){return this.instance.val()},e.prototype.insertValue=function(e){r.a.insertTextAtCursor(this.instance[0],e)},e.prototype.setValue=function(e){this.instance.val(e)},e.prototype.bind=function(){var e=this.inlineAttachment||(this.inlineAttachment=new i.default(this,this.options));this.instance.bind({paste:function(t){e.onPaste(t.originalEvent)},drop:function(t){t.stopPropagation(),t.preventDefault(),e.onDrop(t.originalEvent)},"dragenter dragover":function(e){e.stopPropagation(),e.preventDefault()}})},e}();t.default=o}])});